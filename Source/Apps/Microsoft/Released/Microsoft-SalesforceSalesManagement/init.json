{
  "Install": {
    "Pages": [
      {
        "architectureDiagram": "dist/Apps/Microsoft/Released/Microsoft-SalesforceSalesManagement/Web/Images/salesforceArchitectureDiagram.png",
        "displayname": "Getting Started",
        "downloadLink": "https://pbistservice.azurewebsites.net/Installers/Salesforce_Template_Installer.exe",
        "list1": [
          "$translate(INIT_GETTING_STARTED_AZURE_SUBSCRIPTION)",
          "$translate(INIT_GETTING_STARTED_SALESFORCE_SUBSCRIPTION)",
          "$translate(INIT_GETTING_STARTED_AZURE_SQL)",
          "$translate(INIT_GETTING_STARTED_PBI_DESKTOP)",
          "$translate(INIT_GETTING_STARTED_PBI_PRO)"
        ],
        "list2": [
          "$translate(INIT_GETTING_STARTED_CLOUD_SOLUTION)",
          "$translate(INIT_GETTING_STARTED_DATA_PULL_SALESFORCE)",
          "$translate(INIT_GETTING_STARTED_CONNECT_AS_PBI)"
        ],
        "name": "$SiteCommon$/pages-gallery/getting-started.html",
        "selection": {
          "choice": "$translate(INIT_GETTING_STARTED_AZURE_SQL)",
          "choiceDownload": "$translate(INIT_GETTING_STARTED_SQL_ONPREMISE)",
          "label": "$translate(INIT_GETTING_STARTED_WHERE)",
          "list1": [
            "$translate(INIT_GETTING_STARTED_SQL_SERVER)",
            "$translate(INIT_GETTING_STARTED_AZURE_VM)",
            "$translate(INIT_GETTING_STARTED_PBI_DESKTOP)",
            "$translate(INIT_GETTING_STARTED_PBI_PRO)"
          ],
          "list2": [
            "$translate(INIT_GETTING_STARTED_DEDICATED_SSAS)",
            "$translate(INIT_GETTING_STARTED_PULL_DATA)",
            "$translate(INIT_GETTING_STARTED_DATA_MODEL)",
            "$translate(INIT_GETTING_STARTED_DATA_MODEL_EXCEED)",
            "$translate(INIT_GETTING_STARTED_ENTERPRISE_GATEWAY)"
          ],
          "options": [
            "$translate(INIT_GETTING_STARTED_AZURE_SQL)",
            "$translate(INIT_GETTING_STARTED_SQL_ONPREMISE)"
          ]
        },
        "subtitle": "$translate(INIT_SALESFORCE_SUBTITLE)",
        "templateName": "$translate(INIT_SALESFORCE_TITLE)"
      },
      {
        "displayname": "Azure",
        "name": "$SiteCommon$/pages-gallery/azure-login.html",
        "pricingCalculatorUrl": "$translate(INIT_SALESFORCE_PRICING_CALCULATOR_URL)",
        "pricingCost": "$translate(INIT_SALESFORCE_PRICING_COST)",
        "pricingUrl": "$translate(INIT_SALESFORCE_PRICING_URL)"
      },
      {
        "dataMovement": "ADF",
        "displayname": "Data Movement",
        "name": "$SiteCommon$/pages-gallery/data-movement.html"
      },
      {
        "displayname": "Salesforce",
        "name": "$SiteCommon$/pages-gallery/salesforce-login.html",
        "salesforceObjects": "Opportunity,Account,Lead,Product2,OpportunityLineItem,OpportunityStage,User,UserRole"
      },
      {
        "displayname": "Target",
        "isAzureSql": true,
        "name": "$SiteCommon$/pages-gallery/sql-server.html",
        "newSqlDatabase": "SalesforceDB",
        "showAzureSql": false,
        "showGovAzure": true,
        "showNewSqlOption": true,
        "sqlInstance": "NewSql",
        "subtitle": "$translate(INIT_TARGET_SALESFORCE)",
        "title": "$translate(INIT_SQL_TITLE)"
      },
      {
        "displayname": "AAS",
        "name": "$SiteCommon$/pages-gallery/choose-analysis-server.html",
        "showDescription": true,
        "skip": "$dsall(azureSqlDisabled)[0]"
      },
      {
        "displayname": "AAS Login",
        "name": "$SiteCommon$/pages-gallery/ssas.html",
        "skip": "$run(this.MS.DataStore.getAllValues('azureSqlDisabled')[0] === 'true' || this.MS.DataStore.getValue('ssasDisabled') === 'true' ? 'true': 'false')"
      },
      {
        "displayname": "Customize",
        "name": "$SiteCommon$/pages-gallery/customize.html",
        "showEmails": "$run(this.MS.DataStore.getValue('DataMovement') === 'ADF')",
        "showRecurrenceOptions": "$run(this.MS.DataStore.getValue('DataMovement') === 'ADF')",
        "sourceApplication": "Salesforce"
      },
      {
        "displayname": "Summary",
        "name": "$SiteCommon$/pages-gallery/summary.html",
        "values": {
          "Subscription": "$(this.MS.DataStore.getJson(\"SelectedSubscription\").SubscriptionId)",
          "ResourceGroup": "$(this.MS.DataStore.getValue(\"SelectedResourceGroup\"))",
          "SqlServer": "$(this.MS.DataStore.getValue(\"Server\"))",
          "Database": "$(this.MS.DataStore.getValue(\"Database\"))",
          "Fiscal Start": "$(this.MS.DataStore.getValue(\"fiscalMonth\"))",
          "Emails": "$(this.MS.DataStore.getValue(\"EmailAddresses\"))",
          "Actuals": "$(this.MS.DataStore.getValue(\"actuals\"))",
          "Future data load frequency": "$(this.MS.DataStore.getValue(\"postDeploymentPipelineFrequency\"))",
          "Future data load interval": "$(this.MS.DataStore.getValue(\"postDeploymentPipelineInterval\"))"
        }
      },
      {
        "asDatabase": "SalesManagement",
        "displayname": "Progress",
        "filename": "$save('SalesManagementReport.pbix')",
        "filenameSSAS": "SalesManagementReportAS.pbix",
        "finishedActionName": "$run(this.MS.DataStore.getValue('DataMovement') === 'ADF' ? 'Microsoft-ADFSliceStatus' : this.MS.DataStore.getValue('DataMovement') === 'Scribe' ? 'Microsoft-GetScribeSolutionStatus' : 'Microsoft-GetInformaticaTaskStatus')",
        "name": "$SiteCommon$/pages-gallery/progress.html",
        "showCounts": true,
        "targetSchema": "dbo",
        "uniqueId": "$save(this.MS.UtilityService.GetUniqueId(10))"
      }
    ],

    "Actions": [
      {
        "displayname": "$translate(INIT_ACTION_DEPLOYING_SQL_SCRIPTS)",
        "name": "Microsoft-DeploySQLScripts",
        "SqlScriptsFolder": "Service/Database",
        "SqlServerIndex": "0"
      },
      {
        "displayname": "$translate(INIT_ACTION_DEPLOYING_SQL_SCRIPTS)",
        "name": "Microsoft-DeploySQLScripts",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'Scribe')",
        "SqlScriptsFolder": "Service/Database/Scribe",
        "SqlServerIndex": "0"
      },
      {
        "displayname": "$translate(INIT_ACTION_RETRIEVING_SALESFORCE_METADATA)",
        "name": "Microsoft-SalesforceGetObjectMetadata",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'ADF')"
      },
      {
        "displayname": "$translate(INIT_ACTION_CREATING_SALESFORCE_TABLES)",
        "name": "Microsoft-SalesforceSqlArtefacts",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'ADF')"
      },
      {
        "displayname": "$translate(INIT_ACTION_DEPLOYING_DATABASE_CONFIGURATION)",
        "name": "Microsoft-SetConfigValueInSql",
        "SqlConfigTable": "[smgt].[configuration]",
        "SqlServerIndex": "0"
      },
      {
        "displayname": "$translate(INIT_ACTION_DEPLOYING_DATABASE_CONFIGURATION)",
        "name": "Microsoft-SetConfigValueInSql",
        "skip": "$run(this.MS.DataStore.getAllValues('azureSqlDisabled')[0] === 'true' || this.MS.DataStore.getValue('ssasDisabled') === 'true' ? 'true': 'false')",
        "SqlConfigTable": "[smgt].[configuration]",
        "SqlEntryName": "FunctionName",
        "SqlEntryValue": "$run('asscheduler' + this.MS.DataStore.getValue('uniqueId'))",
        "SqlGroup": "SolutionTemplate",
        "SqlServerIndex": "0",
        "SqlSubGroup": "SSAS"
      },
      {
        "ASDatabase": "SalesManagement",
        "displayname": "$translate(INIT_ACTION_DEPLOYING_AS_MODEL)",
        "name": "Microsoft-DeployAzureASModel",
        "skip": "$run(this.MS.DataStore.getAllValues('azureSqlDisabled')[0] === 'true' || this.MS.DataStore.getValue('ssasDisabled') === 'true' ? 'true': 'false')",
        "SqlConnectionString": "$dsall(SqlConnectionString)[0]",
        "xmlaFilePath": "Service/AzureAS/SalesManagement.xmla"
      },
      {
        "DeploymentName": "ASFunction",
        "displayname": "$translate(INIT_ACTION_DEPLOYING_AS_SCHEDULER)",
        "FunctionName": "$save('asscheduler' + this.MS.DataStore.getValue('uniqueId'))",
        "name": "Microsoft-DeployAzureFunction",
        "RepoUrl": "https://github.com/MohaaliMicrosoft/AnalysisServicesRefresh",
        "skip": "$run(this.MS.DataStore.getAllValues('azureSqlDisabled')[0] === 'true' || this.MS.DataStore.getValue('ssasDisabled') === 'true' ? 'true': 'false')",
        "sku": "Standard"
      },
      {
        "DeploymentName": "ASFunction",
        "displayname": "$translate(INIT_ACTION_WAITING_AS_SCHEDULER)",
        "name": "Microsoft-WaitForArmDeploymentStatus",
        "skip": "$run(this.MS.DataStore.getAllValues('azureSqlDisabled')[0] === 'true' || this.MS.DataStore.getValue('ssasDisabled') === 'true' ? 'true': 'false')"
      },
      {
        "AppSettingKeys": {
          "connStringAS": "$ds(ASConnectionString)",
          "connStringSql": "$dsall(SqlConnectionString)[0]",
          "databaseAS": "SalesManagement",
          "functionName": "$run('asscheduler' + this.MS.DataStore.getValue('uniqueId'))",
          "schema": "[smgt]"
        },
        "DeploymentName": "ASFunction",
        "displayname": "$translate(INIT_ACTION_SETTING_UP_AS_SCHEDULER)",
        "name": "Microsoft-DeployAzureFunctionConnectionStrings",
        "skip": "$run(this.MS.DataStore.getAllValues('azureSqlDisabled')[0] === 'true' || this.MS.DataStore.getValue('ssasDisabled') === 'true' ? 'true': 'false')"
      },
      {
        "DeploymentName": "ADFDeployment",
        "displayname": "$translate(INIT_ACTION_CREATING_DATA_CONNECTIONS)",
        "name": "Microsoft-ADFDeployLinkedServices",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'ADF')"
      },
      {
        "DeploymentName": "ADFPreDeploymentDatasets",
        "displayname": "$translate(INIT_ACTION_CREATING_MAPPINGS)",
        "name": "Microsoft-ADFDeployDatasets",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'ADF')"
      },
      {
        "DeploymentName": "ADFPreDeploymentPipeline",
        "displayname": "$translate(INIT_ACTION_SCHEDULING_HISTORICAL)",
        "name": "Microsoft-ADFDeployPipelines",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'ADF')"
      },
      {
        "DeploymentName": "ADFPostDeploymentDatasets",
        "displayname": "$translate(INIT_ACTION_CREATING_MAPPINGS_FUTURE)",
        "name": "Microsoft-ADFDeployDatasets",
        "postDeploymentPipelineType": "PostDeployment",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'ADF')"
      },
      {
        "DeploymentName": "ADFPostDeploymentPipeline",
        "displayname": "$translate(INIT_ACTION_SCHEDULING_DATA_LOADS)",
        "name": "Microsoft-ADFDeployPipelines",
        "postDeploymentPipelineType": "PostDeployment",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'ADF')"
      },
      {
        "displayname": "$translate(INIT_ACTION_CHECKING_DATA)",
        "FinishedActionName": "Microsoft-ADFSliceStatus",
        "IsWaiting": true,
        "name": "Microsoft-GetDataPullStatus",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'ADF')",
        "SqlServerIndex": 0,
        "TargetSchema": "dbo"
      },
      {
        "displayname": "$translate(INIT_ACTION_CLEANING_INFORMATICA_ENVIRONMENT)",
        "name": "Microsoft-CleanInformaticaEnvironment",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'Informatica')"
      },
      {
        "displayname": "$translate(INIT_ACTION_CREATING_INFORMATICA_CONNECTION_SALESFORCE)",
        "name": "Microsoft-CreateInformaticaConnectionSalesforce",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'Informatica')"
      },
      {
        "displayname": "$translate(INIT_ACTION_CREATING_INFORMATICA_CONNECTION_SQL)",
        "name": "Microsoft-CreateInformaticaConnectionSql",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'Informatica')"
      },
      {
        "displayname": "$translate(INIT_ACTION_CREATING_INFORMATICA_TASK)",
        "Entities": "Account,Lead,Opportunity,OpportunityLineItem,OpportunityStage,UserRole,User,Product2",
        "name": "Microsoft-CreateInformaticaTask",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'Informatica')"
      },
      {
        "displayname": "$translate(INIT_ACTION_STARTING_INFORMATICA_TASK)",
        "name": "Microsoft-StartInformaticaTask",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'Informatica')"
      },
      {
        "displayname": "$translate(INIT_ACTION_CHECKING_DATA)",
        "FinishedActionName": "Microsoft-GetInformaticaTaskStatus",
        "IsWaiting": true,
        "name": "Microsoft-GetDataPullStatus",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'Informatica')",
        "SqlServerIndex": 0,
        "TargetSchema": "dbo"
      },
      {
        "displayname": "$translate(INIT_ACTION_CLEANING_SCRIBE_ENVIRONMENT)",
        "name": "Microsoft-CleanScribeEnvironment",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'Scribe')"
      },
      {
        "displayname": "$translate(INIT_ACTION_CREATING_SCRIBE_CONNECTION_SALESFORCE)",
        "name": "Microsoft-CreateScribeConnectionSalesforce",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'Scribe')"
      },
      {
        "displayname": "$translate(INIT_ACTION_CREATING_SCRIBE_CONNECTION_SQL)",
        "name": "Microsoft-CreateScribeConnectionSql",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'Scribe')"
      },
      {
        "displayname": "$translate(INIT_ACTION_CREATING_SCRIBE_SOLUTION)",
        "Entities": "Account,Lead,Opportunity,OpportunityLineItem,OpportunityStage,UserRole,User,Product2",
        "name": "Microsoft-CreateScribeSolution",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'Scribe')"
      },
      {
        "displayname": "$translate(INIT_ACTION_PROCESS_SCRIBE_SOLUTION)",
        "name": "Microsoft-ProcessScribeSolution",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'Scribe')"
      },
      {
        "displayname": "$translate(INIT_ACTION_CHECKING_DATA)",
        "FinishedActionName": "Microsoft-GetScribeSolutionStatus",
        "IsWaiting": true,
        "name": "Microsoft-GetDataPullStatus",
        "skip": "$run(this.MS.DataStore.getValue('DataMovement') !== 'Scribe')",
        "SqlServerIndex": 0,
        "TargetSchema": "dbo"
      }
    ]
  }
}